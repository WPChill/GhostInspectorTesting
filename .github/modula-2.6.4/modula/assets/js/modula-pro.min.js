function modula_pro_get_url_parameters(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||!1}function modulacheckDevice(t){var e;return void 0!==t&&(e=!0,void 0!==t.lightbox_devices&&"both"!==t.lightbox_devices?"mobile"==t.lightbox_devices?jQuery(window).width()<1024:1024<jQuery(window).width():e)}!function(u){"use strict";function i(t){this.instance=t,this.filter="*",this.hiddenItems=t.$element.find(".hidden-items .modula-hidden-item"),this.instance.options.haveFilters&&this.initFilters(),"fancybox"==this.instance.options.lightbox&&this.initLightbox()}i.prototype.initLightbox=function(){var i,n,a,l=this,s=l.instance,o=!1,d=!1;s.$element.on("click",".modula-item-link:not( .modula-simple-link )",function(t){t.preventDefault();var t=s.$items.filter(l.filter).find(".modula-item-link").filter(":not( .modula-simple-link )").closest(".modula-item"),e=jQuery.map(t,function(t){var e=jQuery(t).find(".modula-item-link"),t=jQuery(t).find(".pic"),i=t.data("full");return{src:i=void 0===i?t.attr("src"):i,opts:{$thumb:t.parents(".modula-item"),caption:e.data("caption"),alt:t.attr("alt"),thumb:e.attr("data-thumb"),image_id:e.attr("data-image-id")}}}),i=u(this).parent().find("img.pic"),o=(0<l.hiddenItems.length&&(o=jQuery.map(l.hiddenItems.filter(l.filter),function(t){var t=jQuery(t),e=t.data("full");return{src:e=void 0===e?t.attr("href"):e,opts:{caption:t.data("caption"),alt:"",thumb:t.attr("data-thumb"),image_id:t.attr("data-image-id")}}}),e=e.concat(o)),t.index(jQuery(this).parents(".modula-item")));s.options.lightboxOpts.beforeLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_load",[s,this])},s.options.lightboxOpts.afterLoad=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_load",[s,this])},s.options.lightboxOpts.beforeShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_show",[s,this])},s.options.lightboxOpts.afterShow=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_show",[s,this])},s.options.lightboxOpts.beforeClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_before_close",[s,this])},s.options.lightboxOpts.afterClose=function(){jQuery(document).trigger("modula_fancybox_lightbox_after_close",[s,this])},s.options.lightboxOpts.onInit=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_init",[s,this])},s.options.lightboxOpts.onActivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_activate",[s,this])},s.options.lightboxOpts.onDeactivate=function(){jQuery(document).trigger("modula_fancybox_lightbox_on_deactivate",[s,this])},modulacheckDevice(s.options)&&(s.options.mobileDoubleClick&&u(window).width()<1024?(d?(clearTimeout(n),d=!1,a&&a.is(i)&&jQuery.modulaFancybox.open(e,s.options.lightboxOpts,o)):(d=!0,n=setTimeout(function(){d=!1},300)),a=i):jQuery.modulaFancybox.open(e,s.options.lightboxOpts,o))}),void 0!==s.options.copyCaptionMobile&&"1"==s.options.copyCaptionMobile&&jQuery(document).on("click","html body .modula-fancybox-container.modula-lightbox-"+s.element.id+" .modula-fancybox-caption__body",function(t){var e;o?(clearTimeout(i),o=!1,e=u("<input id='modula-temp-field'>"),u("body").append(e),e.val(u(this).text()).select(),document.execCommand("copy"),e.remove()):(o=!0,i=setTimeout(function(){o=!1},300))})},i.prototype.initFilters=function(){var n=this,r=n.instance,t=(void 0!==r.options.defaultActiveFilter&&("All"==r.options.defaultActiveFilter?n.filter="*":n.filter=".jtg-filter-"+r.options.defaultActiveFilter),modula_pro_get_url_parameters("jtg-filter"));t&&(n.filter=".jtg-filter-"+t),"1"==r.options.dropdownFilters?r.$element.on("change",".filters",function(t){var e,i,o;jQuery(this).hasClass("modula_menu__item--current")||(n.filter=".jtg-filter-"+this.value,r.$element.find(".filters .modula_menu__item--current").removeClass("modula_menu__item--current"),r.$element.find(".filters option[value='"+this.value+"']").addClass("modula_menu__item--current").prop("selected","selected"),r.isIsotope?(r.$items.removeClass("jtg-hidden"),r.$items.not(n.filter).addClass("jtg-hidden"),r.reset(),r.$itemsCnt.modulaisotope({filter:n.filter}).modulaisotope("layout"),"creative-gallery"==r.options.type&&r.$items.not(".jtg-hidden").each(function(t,e){r.placeImage(t)}),"custom-grid"==r.options.type&&(e=r.$element.find(".modula-items").width(),i=r.options.columns,o=document.documentElement.clientWidth,"1"==r.options.enableResponsive&&(o<=568?i=r.options.mobileColumns:o<=768&&(i=r.options.tabletColumns)),0<r.options.gutter?r.options.gutter:Math.floor(e/i*1e3),r.$items.not(".jtg-hidden").each(function(t,e){r.placeImage(t)}))):r.$itemsCnt.justifiedGallery({filter:n.filter}))}):r.$element.on("click",".filters a",function(t){if("0"!=r.options.filterClick)return!0;var s,d,e;t.preventDefault(),jQuery(this).parent().hasClass("modula_menu__item--current")||(n.filter=".jtg-filter-"+jQuery(this).data("filter"),r.$element.find(".filters .modula_menu__item--current").removeClass("modula_menu__item--current"),r.$element.find(".filters a[data-filter='"+jQuery(this).attr("data-filter")+"']").parent().addClass("modula_menu__item--current"),r.isIsotope?(r.$items.removeClass("jtg-hidden"),r.$items.not(n.filter).addClass("jtg-hidden"),r.reset(),r.$itemsCnt.modulaisotope({filter:n.filter}).modulaisotope("layout"),"creative-gallery"==r.options.type&&r.$items.not(".jtg-hidden").each(function(t,e){var i=r.tiles[t];u(e).data("size",i),u(e).addClass("tiled").addClass(i.width>i.height?"tile-h":"tile-v").data("position"),u(e).css({width:i.width,height:i.height}),u(e).find(".figc").css({width:i.width,height:i.height}),r.loadImage(t)}),"custom-grid"==r.options.type&&(t=r.$element.find(".modula-items").width(),d=r.options.columns,e=document.documentElement.clientWidth,"1"==r.options.enableResponsive&&(e<=568?d=r.options.mobileColumns:e<=768&&(d=r.options.tabletColumns)),s=0<r.options.gutter?(t-r.options.gutter*(d-1))/d:Math.floor(t/d*1e3)/1e3,r.$items.not(".jtg-hidden").each(function(t,e){var i,o,n={},a=u(e).data("width"),l=u(e).data("height");12<a&&(a=12),"1"==r.options.enableResponsive&&(i=a,o=l,1==d?l=(a=1)*o/i:((a=Math.round(d*i/12))<1&&(a=1),(l=Math.round(a*o/i))<1&&(l=1))),n.width=s*a+r.options.gutter*(a-1),n.height=Math.round(s)*l+r.options.gutter*(l-1),u(e).data("size",n).addClass("tiled").addClass(n.width>n.height?"tile-h":"tile-v").data("position"),u(e).css(u(e).data("size")),u(e).find(".figc").css({width:u(e).data("size").width,height:u(e).data("size").height}),r.loadImage(t)}))):r.$itemsCnt.justifiedGallery({filter:n.filter}))}),r.$element.find(".filter-by-wrapper").click(function(){var t=jQuery(this);r.$element.find(".filters").hasClass("active")?(r.$element.find(".filters").hide(600).removeClass("active"),t.removeClass("opened")):(r.$element.find(".filters").show(600).addClass("active"),t.addClass("opened"))}),"*"!=n.filter&&""!=n.filter&&(r.isIsotope?(r.$items.removeClass("jtg-hidden"),r.$items.not(n.filter).addClass("jtg-hidden"),r.reset(),r.$itemsCnt.modulaisotope({filter:n.filter})):r.$itemsCnt.justifiedGallery({filter:n.filter}))},u(document).on("modula_api_after_init",function(t,e){new i(e)})}(jQuery);